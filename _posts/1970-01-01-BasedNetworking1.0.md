---
layout: post
title: 抽象网工1.0 - 使用 RIPv2 和 RIPng 构建运营商骨干网络
---

RIP 协议？上一次见到它的实际应用究竟是在什么地方呢？对于大多数人来说，他们上一次配置 RIP 还是应付老掉牙的计网作业时的事情，也许这也是他们人生中最后一次跟 RIP 交手。

网络上充斥着这样的声音，RIP 在现网应用中 RIP 了。作为一个出生于 80 年代的矢量路由协议，它有着太多局限性，也不易于拓展，人们转向更强大的 OSPF 和 IS-IS 而直接忽视 RIP 的存在也是情理之中的事情。

尽管网络上充斥着这样的声音，但 RIP 真的有那么糟糕吗？抽象网工系列为您揭晓。

# 任务背景
---
在遥远的国度，一家名为 Based Telecom 的电信公司诞生了。与其它电信公司不同的是，他们竟然要使用 RIP 来构建自己的骨干网络，还要在上面跑 MPLS ！

Based Telecom 有三个客户
* Based Enterprise，他们使用 MPLS VPN 和静态路由来实现分支机构和总部之间的互联互通。
* Financial Information Exchange Center，使用 MPLS 二层专线连接 Based Enterprise 和 Based Bank。
* Based Bank，同样使用 MPLS VPN 和静态路由实现分支机构和总部之间的互联互通。

所有客户在总部通过 BGP 与 Based Telecom 进行路由交换，以实现公网互联。所有分支机构通过总部访问互联网。

## 号码资源分配
---
* Based Telecom
  * ASN
    * 114514
  * IPv4 地址
    * 11.4.0.0/16
      * 11.4.0.0/24
        * 11.4.0.0/30（g0/0@P1，g0/0@P2）
        * 11.4.0.4/30（g0/1@P1，g0/0@P3）
        * 11.4.0.8/30（g0/1@P2，g0/1@P3）
      * 11.4.1.0/24
        * 11.4.1.0/30（g0/2@P1，g0/0@PE1）
        * 11.4.1.4/30（g0/3@P1，g0/0@PE2）
        * 11.4.1.8/30（g0/4@P1，g0/0@RR1）
      * 11.4.2.0/24
        * 11.4.2.0/30（g0/2@P2，g0/0@PE3）
        * 11.4.2.4/30（g0/3@P2，g0/0@PE4）
        * 11.4.2.8/30（g0/4@P2，g0/0@RR2）
      * 11.4.3.0/24
        * 11.4.3.0/30（g0/2@P3，g0/0@PE5）
    * 191.9.81.0/24
      * 191.9.81.0/32（lo0@P1）
      * 191.9.81.1/32（lo0@P2）
      * 191.9.81.2/32（lo0@P3）
    * 19.19.81.0/24
      * 19.19.81.0/32（lo0@PE1）
      * 19.19.81.1/32（lo1@PE1，g0/1.100@PE1）
      * 19.19.81.2/32（lo0@PE2）
    * 191.98.1.0/24
      * 191.98.1.0/32（lo0@PE3）
      * 191.98.1.1/32（lo1@PE3，g0/1.100@PE3）
      * 191.98.1.2/32（lo0@PE4）
    * 19.198.1.0/24
      * 19.198.1.0/32（lo0@PE5）
      * 19.198.1.1/32（lo1@PE5，g0/1.100@PE5，g0/0.100@Based-Enterprise）
  * IPv6 地址
    * 2001:114::/32
      * 2001:114:0::/48
        * 2001:114:0::1/128（lo0@P1）
        * 2001:114:0::2/128（lo0@P2）
        * 2001:114:0::3/128（lo0@P3）
      * 2001:114:1::/48
        * 2001:114:1::1/128（lo0@PE1）
        * 2001:114:1::2/128（lo0@PE2）
      * 2001:114:2::/48
        * 2001:114:2::1/128（lo0@PE3）
        * 2001:114:2::2/128（lo0@PE4）
      * 2001:114:3::/48
        * 2001:114:3::1/128（lo0@PE5）
* Based Enterprise
  * ASN
    * 810893
  * IPv4 地址
    * 81.0.0.0/22
      * 81.0.0.0/24
        * 81.0.0.0/32（lo0@Based-Enterprise）
      * 81.0.1.0/24
        * 81.0.1.0/32（lo1@Based-Enterprise，g0/0.100@Based-Enterprise，g0/1.100@PE5）
      * 81.0.2.0/24
        * 81.0.2.0/32（lo0@Based-Enterprise-Branch1）
      * 81.0.3.0/24
        * 81.0.3.0/32（lo0@Based-Enterprise-Branch2）
      * 81.0.4.0/24
        * 81.0.4.0/30（g0/0.101@Based-Enterprise，g0/1.101@PE5）
        * 81.0.4.4/30（g0/0.101@Based-Enterprise-Branch1，g0/1.101@PE2）
        * 81.0.4.8/30（g0/0.101@Based-Enterprise-Branch2，g0/2.101@PE3）
  * IPv6 地址
    * 2409:1919:810::/44
      * 2409:1919:810::/48
        * 2409:1919:810::1/128（lo0@Based-Enterprise）
      * 2409:1919:811::/48
        * 2409:1919:811::1/128（lo0@Based-Enterprise-Branch1）
      * 2409:1919:812::/48
        * 2409:1919:812::1/128（lo0@Based-Enterprise-Branch2）

# 任务目标
---
* [使用 RIP 协议构建全网通 IPv4 / IPv6 网络](#任务一使用-rip-协议构建全网通-ipv4--ipv6-网络)
* [构建 MPLS 网络](#任务二构建-mpls-网络)
* [配置 MPLS 伪线业务](#任务三配置-mpls-伪线业务)
* [配置 内部 BGP 互联](#任务四配置内部-bgp-互联)
* [配置 外部 BGP 互联](#任务五配置外部-bgp-互联)
* [配置 BGP MPLS L3VPN 业务](#任务六配置-bgp-mpls-l3vpn-业务)
* [配置 MPLS TE FRR](#任务七配置-mpls-te-frr)

# 拓扑图
---
![Topo](/img/topo-based-network-1.0.jpeg.jpg)

# 任务一：使用 RIP 协议构建全网通 IPv4 / IPv6 网络
---

# 任务二：构建 MPLS 网络
---

# 任务三：配置 MPLS 伪线业务
---

# 任务四：配置内部 BGP 互联
---

# 任务五：配置外部 BGP 互联
---

# 任务六：配置 BGP MPLS L3VPN 业务
---

# 任务七：配置 MPLS TE FRR
---